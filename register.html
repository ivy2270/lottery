<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2025é™½æ˜ç‰™é†«é›™åŒ—è¯åˆå°¾ç‰™æŠ½çåˆ¸</title>
<link rel="icon" type="image/svg+xml" href="red-envelope-svgrepo-com.svg">
  <!--
  Vectors and icons by <a href="https://github.com/twitter/twemoji?ref=svgrepo.com" target="_blank">Twitter</a>
  in MIT License via <a href="https://www.svgrepo.com/" target="_blank">SVG Repo</a>
  -->
<script src="https://cdn.tailwindcss.com"></script>
<style>
/* å¼•å…¥ç²‰åœ“é«” */
@font-face {
  font-family: 'jf-openhuninn';
  src: url('https://ymdd-image-tw.s3.ap-east-2.amazonaws.com/font/jf-openhuninn-2.1.ttf') format('truetype');
}

:root { 
  --pink1:#FFE4EC; 
  --pink2:#FF9BB3; 
  --accent:#FF4D84; 
}

body { 
  font-family: 'jf-openhuninn', "Noto Sans TC", system-ui, -apple-system, sans-serif; 
  background: linear-gradient(180deg, var(--pink1), #fff);
  margin: 0;
  min-height: 100vh;
}

input, button {
  font-family: inherit !important;
}

.main-card {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.08);
}

/* é‡å°å¤§æ¨™é¡Œå„ªåŒ–ï¼Œä½¿ç”¨ clamp ç¢ºä¿ç¸®æ”¾ä¸”ä¸æ›è¡Œ */
.main-header {
  margin: 0 0 20px 0;
  color: #b72b4b;
  font-weight: bold;
  text-align: center;
  /* clamp(æœ€å°å€¼, éŸ¿æ‡‰å€¼, æœ€å¤§å€¼) */
  font-size: clamp(1.1rem, 4vw, 1.5rem);
  white-space: nowrap;
}

.btn-accent {
  background-color: var(--accent);
  transition: background 0.3s;
}

.btn-accent:hover:not(:disabled) {
  background-color: #FF2B69;
}

.btn-accent:disabled {
  background-color: #ccc;
  cursor: not-allowed;
}

.input-style {
  border: 1px solid #eee;
  transition: border-color 0.3s;
}

.input-style:focus {
  border-color: var(--pink2);
  outline: none;
  box-shadow: 0 0 0 2px var(--pink1);
}

.res-green { background-color: #f0fff4; color: #276749; border: 1px solid #c6f6d5; }
.res-red { background-color: #fff5f5; color: #9b2c2c; border: 1px solid #fed7d7; }
.res-yellow { background-color: #fffaf0; color: #9c4221; border: 1px solid #feebc8; }
</style>
</head>
<body class="flex flex-col items-center justify-center p-4">

  <h1 class="main-header">ğŸ´ 2025é™½æ˜ç‰™é†«é›™åŒ—è¯åˆå°¾ç‰™ ğŸ´</h1>

  <div class="main-card p-8 w-full max-w-sm">
    <h2 id="tableTitle" class="text-xl font-bold mb-6 text-center text-gray-700">è¼‰å…¥ä¸­...</h2>

    <div class="space-y-4">
      <input id="name" placeholder="å§“å" class="w-full p-3 rounded-lg input-style" type="text">
      <input id="phone" placeholder="æ‰‹æ©Ÿå¾Œå››ç¢¼" class="w-full p-3 rounded-lg input-style" type="tel" maxlength="4">
      <button id="submit" class="w-full btn-accent text-white font-bold py-3 rounded-lg">
        é€å‡ºå ±å
      </button>
    </div>

    <p id="result" class="mt-4 p-3 rounded-lg text-center font-bold min-h-[3rem] text-sm hidden"></p>
  </div>

<script>
// --- è¨­å®šå€åŸŸ ---
const GAS_WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbxdZOUi6axtwaJJY4wUhhUd6cVEAi8H7Z62Bw1n3Hdk3hYS6mTxmV9cMcXwBmW5SxqB/exec'; 

const urlParams = new URLSearchParams(window.location.search);
const tableNo = urlParams.get('table') || 'æœªæŒ‡å®š';
document.getElementById('tableTitle').textContent = `ç¬¬ ${tableNo} æ¡Œå ±åç™»éŒ„`;

document.getElementById('submit').onclick = async () => {
  const nameInput = document.getElementById('name');
  const phoneInput = document.getElementById('phone');
  const submitButton = document.getElementById('submit');

  const name = nameInput.value.trim();
  const phone = phoneInput.value.trim();

  if (!name || !phone) {
    showResult('è«‹è¼¸å…¥å§“åå’Œæ‰‹æ©Ÿå¾Œå››ç¢¼ã€‚', 'red');
    return;
  }

  submitButton.disabled = true;
  submitButton.textContent = 'é€å‡ºä¸­...';
  showResult('è³‡æ–™é€å‡ºä¸­ï¼Œè«‹ç¨å€™...', 'yellow');

  try {
    const response = await fetch(GAS_WEB_APP_URL, {
      method: 'POST',
      body: JSON.stringify({ table: tableNo, name, phone })
    });

    const res = await response.json();

    if (res.success) {
      showResult(res.message, 'green');
      nameInput.value = '';
      phoneInput.value = '';
    } else {
      showResult(res.message, 'red');
    }
  } catch (err) {
    showResult('é€£ç·šå¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ– GAS è¨­å®š', 'red');
    console.error(err);
  } finally {
    submitButton.disabled = false;
    submitButton.textContent = 'é€å‡ºå ±å';
  }
};

function showResult(text, color) {
  const resultDiv = document.getElementById('result');
  resultDiv.classList.remove('hidden', 'res-red', 'res-yellow', 'res-green');
  
  let colorClass = 'res-yellow';
  if (color === 'red') colorClass = 'res-red';
  if (color === 'green') colorClass = 'res-green';
  
  resultDiv.classList.add(colorClass);
  resultDiv.textContent = text;
}
</script>
</body>
</html>
